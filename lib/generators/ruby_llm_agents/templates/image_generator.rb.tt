# frozen_string_literal: true

module Images
<%- if class_name.include?("::") -%>
<%- class_name.split("::")[0..-2].each_with_index do |mod, i| -%>
<%= "  " * (i + 1) %>module <%= mod %>
<%- end -%>
<%= "  " * class_name.split("::").length %>class <%= class_name.split("::").last %>Generator < ApplicationImageGenerator
<%- else -%>
  class <%= class_name %>Generator < ApplicationImageGenerator
<%- end -%>
    # Model configuration
    model "<%= options[:model] %>"
    size "<%= options[:size] %>"
    quality "<%= options[:quality] %>"
    style "<%= options[:style] %>"
<% if options[:content_policy] != "standard" -%>
    content_policy :<%= options[:content_policy] %>
<% end -%>
<% if options[:cache] -%>

    # Caching
    cache_for <%= options[:cache] %>
<% end -%>

    # Optional: Add a prompt template
    # template "Professional {prompt}, high quality, detailed"

    # Optional: Add negative prompts (for models that support it)
    # negative_prompt "blurry, low quality, distorted"

    # Optional: Custom preprocessing
    # Override this method to modify prompts before generation
    #
    # def preprocess_prompt(prompt)
    #   "#{prompt}, professional quality"
    # end
<%- if class_name.include?("::") -%>
<%- class_name.split("::").length.times do |i| -%>
<%= "  " * (class_name.split("::").length - i) %>end
<%- end -%>
<%- else -%>
  end
<%- end -%>
end
