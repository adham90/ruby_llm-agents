# frozen_string_literal: true

# Migration to remove workflow columns (workflows feature removed)
class RemoveWorkflowColumnsFromRubyLLMAgentsExecutions < ActiveRecord::Migration<%= migration_version %>
  def change
    # Remove indexes first
    remove_index :ruby_llm_agents_executions, [:workflow_id, :workflow_step],
                 if_exists: true
    remove_index :ruby_llm_agents_executions, :workflow_id,
                 if_exists: true
    remove_index :ruby_llm_agents_executions, :workflow_type,
                 if_exists: true

    # Remove the columns
    remove_column :ruby_llm_agents_executions, :workflow_id, :string
    remove_column :ruby_llm_agents_executions, :workflow_type, :string
    remove_column :ruby_llm_agents_executions, :workflow_step, :string
  end
end
