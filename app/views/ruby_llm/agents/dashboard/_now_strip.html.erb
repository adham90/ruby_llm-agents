<div class="mb-6">
  <div class="flex items-center justify-end mb-4">
    <div class="flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
      <%= link_to "Today", ruby_llm_agents.root_path(range: "today"),
          class: "px-3 py-1 text-xs font-medium rounded-md transition-colors #{@selected_range == 'today' ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm' : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'}" %>
      <%= link_to "7 Days", ruby_llm_agents.root_path(range: "7d"),
          class: "px-3 py-1 text-xs font-medium rounded-md transition-colors #{@selected_range == '7d' ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm' : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'}" %>
      <%= link_to "30 Days", ruby_llm_agents.root_path(range: "30d"),
          class: "px-3 py-1 text-xs font-medium rounded-md transition-colors #{@selected_range == '30d' ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm' : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'}" %>
    </div>
  </div>

  <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
    <!-- Success -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow-sm border-t-2 border-green-500">
      <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
        <%= now_strip[:success_today] %>
        <%= comparison_indicator(now_strip.dig(:comparisons, :success_change), metric_type: :success) %>
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Success</p>
    </div>

    <!-- Errors -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow-sm border-t-2 border-red-500">
      <p class="text-2xl font-bold <%= now_strip[:errors_today] > 0 ? 'text-red-600 dark:text-red-400' : 'text-gray-900 dark:text-gray-100' %>">
        <%= now_strip[:errors_today] %>
        <%= comparison_indicator(now_strip.dig(:comparisons, :errors_change), metric_type: :errors) %>
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Errors</p>
    </div>

    <!-- Cost -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow-sm border-t-2 border-amber-500">
      <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
        $<%= number_with_precision(now_strip[:cost_today], precision: 4) %>
        <%= comparison_indicator(now_strip.dig(:comparisons, :cost_change), metric_type: :cost) %>
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Cost</p>
    </div>

    <!-- Avg Duration -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow-sm border-t-2 border-purple-500">
      <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
        <%= format_duration_ms(now_strip[:avg_duration_ms]) %>
        <%= comparison_indicator(now_strip.dig(:comparisons, :duration_change), metric_type: :duration) %>
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Avg Duration</p>
    </div>

    <!-- Tokens -->
    <div class="bg-white dark:bg-gray-800 rounded-lg p-5 shadow-sm border-t-2 border-indigo-500">
      <p class="text-2xl font-bold text-gray-900 dark:text-gray-100">
        <%= number_to_human_short(now_strip[:total_tokens]) %>
        <%= comparison_indicator(now_strip.dig(:comparisons, :tokens_change), metric_type: :tokens) %>
      </p>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Tokens</p>
    </div>
  </div>
</div>
