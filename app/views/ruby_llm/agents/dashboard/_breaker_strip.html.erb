<%# Circuit breaker status strip %>
<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4 mb-6">
  <div class="flex items-center justify-between mb-3">
    <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-200">Circuit Breakers</h3>
    <% if open_breakers.any? %>
      <span class="flex items-center text-xs text-red-600 dark:text-red-400">
        <span class="w-2 h-2 bg-red-500 rounded-full mr-1 animate-pulse"></span>
        <%= open_breakers.size %> open
      </span>
    <% else %>
      <span class="flex items-center text-xs text-green-600 dark:text-green-400">
        <span class="w-2 h-2 bg-green-500 rounded-full mr-1"></span>
        All healthy
      </span>
    <% end %>
  </div>

  <% if open_breakers.any? %>
    <div class="flex flex-wrap gap-2">
      <% open_breakers.each do |breaker| %>
        <%= link_to ruby_llm_agents.agent_path(breaker[:agent_type]),
            class: "inline-flex items-center px-3 py-1.5 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-full text-sm hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors" do %>
          <span class="w-2 h-2 bg-red-500 rounded-full mr-2 animate-pulse"></span>
          <span class="text-red-700 dark:text-red-300 font-medium">
            <%= breaker[:agent_type].gsub(/Agent$/, '') %>
          </span>
          <span class="text-red-500 dark:text-red-400 mx-1">/</span>
          <span class="text-red-600 dark:text-red-300 text-xs">
            <%= breaker[:model_id].split('/').last %>
          </span>
          <% if breaker[:cooldown_remaining] && breaker[:cooldown_remaining] > 0 %>
            <span class="ml-2 text-xs text-red-500 dark:text-red-400 tabular-nums" data-cooldown="<%= breaker[:cooldown_remaining] %>">
              <%= breaker[:cooldown_remaining] %>s
            </span>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <div class="flex items-center justify-center py-2 text-gray-500 dark:text-gray-400">
      <svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      <span class="text-sm">All circuit breakers are closed</span>
    </div>
  <% end %>
</div>
