<% if critical_alerts.any? %>
  <div id="action-center" class="mb-6">
    <div class="flex items-center gap-3 mb-3">
      <span class="text-[10px] font-medium text-red-500 dark:text-red-400 uppercase tracking-widest font-mono">action required</span>
      <span class="font-mono text-xs text-red-400 dark:text-red-500"><%= critical_alerts.size %></span>
      <div class="flex-1 border-t border-gray-200 dark:border-gray-800"></div>
    </div>

    <div class="font-mono text-xs space-y-1">
      <% critical_alerts.each do |alert| %>
        <% case alert[:type] %>
        <% when :breaker %>
          <div class="flex items-center gap-3 py-1.5 px-2 -mx-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800/50">
            <span class="w-1.5 h-1.5 bg-orange-500 rounded-full flex-shrink-0"></span>
            <span class="text-gray-900 dark:text-gray-100">circuit breaker open: <span class="text-gray-500 dark:text-gray-400"><%= alert[:data][:agent_type].gsub(/Agent$/, '') %></span></span>
            <span class="text-gray-400 dark:text-gray-600"><%= alert[:data][:model_id] %> &middot; <%= alert[:data][:failure_count] %>/<%= alert[:data][:threshold] %> failures</span>
            <span class="ml-auto text-orange-600 dark:text-orange-400"><%= alert[:data][:cooldown_remaining] %>s remaining</span>
          </div>

        <% when :budget_breach %>
          <div class="flex items-center gap-3 py-1.5 px-2 -mx-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800/50">
            <span class="w-1.5 h-1.5 bg-red-500 rounded-full flex-shrink-0"></span>
            <span class="text-gray-900 dark:text-gray-100"><%= alert[:data][:period].to_s.capitalize %> budget exceeded</span>
            <span class="text-gray-400 dark:text-gray-600">$<%= number_with_precision(alert[:data][:current], precision: 2) %> / $<%= number_with_precision(alert[:data][:limit], precision: 2) %></span>
            <%= link_to "adjust", ruby_llm_agents.system_config_path, class: "ml-auto text-red-600 dark:text-red-400 hover:underline" %>
          </div>

        <% when :error_spike %>
          <div class="flex items-center gap-3 py-1.5 px-2 -mx-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800/50">
            <span class="w-1.5 h-1.5 bg-red-500 rounded-full flex-shrink-0 animate-pulse"></span>
            <span class="text-gray-900 dark:text-gray-100">error spike detected</span>
            <span class="text-gray-400 dark:text-gray-600"><%= alert[:data][:count] %> errors in last 15 minutes</span>
            <%= link_to "view failures", ruby_llm_agents.executions_path(status: "error"), class: "ml-auto text-red-600 dark:text-red-400 hover:underline" %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
